<script lang="ts">
	import type { Snippet } from 'svelte';
	import { setContext } from 'svelte';

	import type { SinaPlugin } from './plugins.svelte.js';
	import { ProviderContext } from './provider-context.svelte.js';

	interface Properties {
		children?: Snippet;
		providers: (() => void)[];
		plugins?: SinaPlugin<object>[];
	}

	let { children, providers, plugins = [] }: Properties = $props();

	providers.map((provider) => provider());

	setContext(ProviderContext, plugins);
</script>

{#if children}
	{@render children()}
{/if}

<!--
@component

## Multi Provider

Centralized location for provider stores and shared default plugins.

Properties  | Description
------------|---
`providers` | Array of root level stores.
`plugins`   | Shared default plugins.

-->
